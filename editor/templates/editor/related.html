{% extends "./base.html" %}
{% block main %}
<main>
    {% block content %}
        <a href="{{ edit_url }}"><i class="fas fa-chevron-left margin-right"></i><span class="dotted-underline">Back to {{ item|truncatewords:15 }}</span></a>

        <h1><span class="highlight">Related to:</span> {{ item|truncatewords:15 }}</h1>
        <div class="error-notification">This page is currently under development.</div>
        <div class="table-container">
            <table class="tablesorter" id="search-results-table">
                <thead>
                  <tr>
                    <th scope="col" data-label="Title">Title</th>

                    <th class="filter-select" scope="col" data-label="Relation">Relation</th>
                    <th class="filter-select" scope="col" data-label="Type/level">Type/level</th>
                    <th class="filter-select" scope="col" data-label="Publication status">Publication status</th>
                    <th scope="col" data-label="Updated" class="sorter-sugar">Updated</th>
                  </tr>
                </thead>
                <tbody>
                  {% if object_type == 'entity' %}
                    {% for result in writers %}
                      {% include './includes/related_archival_record.html' with record=result relation='Writers' only %}
                    {% endfor %}
                    {% for result in addressees %}
                      {% include './includes/related_archival_record.html' with record=result relation='Addressee' only %}
                    {% endfor %}
                    {% for result in corporate_body_subjects %}
                      {% include './includes/related_archival_record.html' with record=result relation='Corporate bodies as subjects' only %}
                    {% endfor %}
                    {% for result in person_subjects %}
                      {% include './includes/related_archival_record.html' with record=result relation='People as subjects' only %}
                    {% endfor %}
                  {% elif object_type == 'record' %}
                    {% for result in writers %}
                      {% include './includes/related_entity.html' with entity=result relation='Writers' only %}
                    {% endfor %}
                    {% for result in addressees %}
                      {% include './includes/related_entity.html' with entity=result relation='Addressee' only %}
                    {% endfor %}
                    {% for result in corporate_body_subjects %}
                      {% include './includes/related_entity.html' with entity=result relation='Corporate bodies as subjects' only %}
                    {% endfor %}
                    {% for result in person_subjects %}
                      {% include './includes/related_entity.html' with entity=result relation='People as subjects' only %}
                    {% endfor %}
                  {% endif %}
                </tbody>
              </table>
          </div>
          <!-- TODO: add pagination -->
    {% endblock content %}
</main>
{% endblock main %}
