{% extends "./base.html" %}
{% block main %}
<main id="duplicates-page">
    {% block content %}
        <a href="{{ edit_url }}"><i class="fas fa-chevron-left margin-right"></i><span class="dotted-underline">Back to {{ entity|truncatewords:15 }}</span></a>

        <h1>Detected duplicates</h1>
        <p>The list of duplicates has been generated by extracting records that have the same display name. If you feel that a record in the list below is not a duplicate, please change its display name.</p>
        <form id="duplicates-search-form" class="search-header" onsubmit="addDuplicate()">
            <label for="duplicates-search-field" class="highlight">Add a record to the table:</label>
            <!-- change to select2_with_search-->
            <input type="search" name="keyword" id="duplicates-search-field" placeholder="Search by display name" onfocus="this.placeholder=''" onblur="this.placeholder='Search by display name'"/>
            <input type="submit" class="create" aria-label="Search button" value="Add"/>
        </form>
        <!-- if duplicates > 0 -->
        <form id="duplicates-table-form">
            <!-- <div class="success-notification">
                <h4>Your updates were successfuly saved.</h4>
            </div> -->
            <!-- <input name="duplicates_submit" aria-label="submit button to save the duplicated records table" type="submit" class="save" value="Save table" /> -->
            <div class="table-container">
              <table id="duplicates-table">
                <tbody>
                    <tr class="table-section">
                        <td colspan="4">Browsed record: </td>
                    </tr>
                    <tr>
                        <td class="button-cell primary-cell">
                            <label>
                                <input type="radio" value="{{entity_id}}" name="primary_record"/>Primary record
                            </label>
                        </td>
                        <td class="duplicate-cell">
                            <input type="radio" id="duplicate_[entity_id]" name="duplicate_[entity_id]" value="true"/>
                            <label for="duplicate_[entity_id]">Merge with primary</label>
                            <input type="radio" id="not_duplicate_[entity_id]" name="duplicate_[entity_id]" value="false"/>
                            <label for="not_duplicate_[entity_id]">Not related to primary</label>
                        </td>
                        <td>Record ID: <span class="highlight">{{entity_id}}</span></td>
                        <td class="description">
                            <a href="" target="_blank">{{ entity|truncatewords:15 }}</a><br>
                            Type: {{entity.entity_type}} | Publication status: {{publication_status}} | Updated: {{ last_revision.date_created }} by {{ last_revision.user }}
                        </td>
                    </tr>
                    <tr class="table-section">
                        <td colspan="4">Related records: </td>
                    </tr>
                    <tr>
                        <td class="button-cell primary-cell">
                            <label>
                                <input type="radio" value="[entity_id1]" name="primary_record"/>Primary record
                            </label>
                        </td>
                        <td class="duplicate-cell">
                            <input type="radio" id="duplicate_[entity_id1]" name="duplicate_[entity_id1]" value="true"/>
                            <label for="duplicate_[entity_id1]">Merge with primary</label>
                            <input type="radio" id="not_duplicate_[entity_id1]" name="not_duplicate_[entity_id1]" value="false"/>
                            <label for="not_duplicate_[entity_id1]">Not related to primary</label>
                        </td>
                        <td>Record ID: <span class="highlight">[entity_id]</span></td>
                        <td class="description">
                            <a href="" target="_blank">[entity_title]</a><br>
                            Type: [entity_type] | Publication status: [entity_publication_status] | Updated: [entity_updated] by [username]
                        </td>
                    </tr>
                    <tr>
                        <td class="button-cell primary-cell">
                            <label>
                                <input type="radio" value="[entity_id2]" name="primary_record"/>Primary record
                            </label>
                        </td>
                        <td class="duplicate-cell">
                            <input type="radio" id="duplicate_[entity_id2]" name="duplicate_[entity_id2]" value="true"/>
                            <label for="duplicate_[entity_id2]">Merge with primary</label>
                            <input type="radio" id="not_duplicate_[entity_id2]" name="not_duplicate_[entity_id2]" value="false"/>
                            <label for="not_duplicate_[entity_id2]">Not related to primary</label>
                        </td>
                        <td>Record ID: <span class="highlight">[entity_id]</span></td>
                        <td class="description">
                            <a href="" target="_blank">[entity_title]</a><br>
                            Type: [entity_type] | Publication status: [entity_publication_status] | Updated: [entity_updated] by [username]
                        </td>
                    </tr>
                    <tr>
                        <td class="button-cell primary-cell">
                            <label>
                                <input type="radio" value="[entity_id3]" name="primary_record"/>Primary record
                            </label>
                        </td>
                        <td class="duplicate-cell">
                            <input type="radio" id="duplicate_[entity_id3]" name="duplicate_[entity_id3]" value="true"/>
                            <label for="duplicate_[entity_id3]">Merge with primary</label>
                            <input type="radio" id="not_duplicate_[entity_id3]" name="duplicate_[entity_id3]" value="false"/>
                            <label for="not_duplicate_[entity_id3]">Not related to primary</label>
                        </td>
                        <td>Record ID: <span class="highlight">[entity_id]</span></td>
                        <td class="description">
                            <a href="" target="_blank">[entity_title]</a><br>
                            Type: [entity_type] | Publication status: [entity_publication_status] | Updated: [entity_updated] by [username]
                        </td>
                    </tr>
                </tbody>
              </table>
            </div>
            <input name="duplicates_submit" aria-label="submit button to save the duplicated records table" type="submit" class="save" value="Save table" />
        </form>
        <!-- else -->
        <!-- <div class="empty-block">
            <p>You don't have duplicates for this record. &#127881;</p>
        </div> -->
    {% endblock content %}
</main>
{% endblock main %}