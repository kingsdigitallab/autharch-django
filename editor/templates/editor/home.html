{% extends "./base.html" %}

{% block page_header %}
<div id="page-header">
  <h1>My Dashboard</h1>
  <form class="search">
    <label>
      <span hidden>Search</span>
      {{ form.q }}
    </label>
    <input type="submit" class="search-button" aria-label="Search button" value="&#xf002;"/>
  </form>
</div>
{% endblock page_header %}

{% block content %}
<div class="home">
  <h2>Recently modified by me</h2>
  <table id="modified-table" class="tablesorter">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Record type</th>
        <th scope="col">Type/level</th>
        <th scope="col">Publication status</th>
        <th scope="col">Updated</th>
      </tr>
    </thead>
    <tbody>
      {% for record in recently_modified_records %}
      <tr>
        <td><a href="{% url 'editor:record-edit' record_id=record.pk %}">{{ record }}</a></td>
        <td>Archival Record</td>
        <td>{{ record.archival_level }}</td>
        <td>{{ record.publication_status }}</td>
        <td>QAZ</td>
      </tr>
      {% endfor %}
      {% for entity in recently_modified_entities %}
      <tr>
        <td><a href="{% url 'editor:entity-edit' entity_id=entity.pk %}">{{ entity }}</a></td>
        <td>Entity</td>
        <td>{{ entity.entity_type }}</td>
        <td>{{ entity.control.publication_status }}</td>
        <td>{{ entity.modified }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div id="modified-pager" class="pager">
    <div class="page-size">
      <p>
        rows per page:
        <a href="#" class="current">10</a>
        <a href="#">25</a> |
        <a href="#">50</a> |
        <a href="#">100</a>
      </p>
    </div>
    <div class="page-list">
      <button class="first"><i class="fal fa-step-backward"></i></button>
      <button class="prev"><i class="fal fa-caret-left"></i></button>
      <span class="pagecount"></span>
      <button class="next"><i class="fal fa-caret-right"></i></button>
      <button class="last"><i class="fal fa-step-forward"></i></button>
    </div>
  </div>
  {% if unpublished_records is not None %}
  <!-- should be available for moderators and admins. Moderators should be able to approve the records for publication and admins should be able to publish them. -->
  <h2>Records for publication</h2>
  <table id="publication-table" class="tablesorter">
      <thead>
        <tr>
          <th scope="col">Title</th>
          <th scope="col">Record type</th>
          <th scope="col">Type/level</th>
          <th scope="col">Publication status</th>
          <th scope="col">Updated</th>
        </tr>
      </thead>
      <tbody>
        <!-- TODO: add pagination and limit to 5 records per page -->
        {% for record in unpublished_records %}
        <tr>
          <td><a href="{% url 'editor:record-edit' record_id=record.pk %}">{{ record }}</a></td>
          <td>Archival Record</td>
          <td>{{ record.archival_level }}</td>
          <td>{{ record.publication_status }}</td>
          <td>QAZ</td>
        </tr>
        {% endfor %}
        {% for entity in unpublished_entities %}
        <tr>
          <td><a href="{% url 'editor:entity-edit' entity_id=entity.pk %}">{{ entity }}</a></td>
          <td>Entity</td>
          <td>{{ entity.entity_type }}</td>
          <td>{{ entity.control.publication_status }}</td>
          <td>{{ entity.modified }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
  <div id="publication-pager" class="pager">
    <div class="page-size">
      <p>
        rows per page:
        <a href="#" class="current">10</a> |
        <a href="#">25</a> |
        <a href="#">50</a> |
        <a href="#">100</a>
      </p>
    </div>
    <div class="page-list">
      <button class="first"><i class="fal fa-step-backward"></i></button>
      <button class="prev"><i class="fal fa-caret-left"></i></button>
      <span class="pagecount"></span>
      <button class="next"><i class="fal fa-caret-right"></i></button>
      <button class="last"><i class="fal fa-step-forward"></i></button>
    </div>
  </div>
  {% endif %}
</div>
{% endblock content %}
